---
name: ridlmd
version: 2.0.0
description: "Convert a comprehensive PRD into an agent-sized ridl.md with iteration definitions for the RIDL autonomous agent loop. Each iteration definition encompasses a user story and verifiable acceptance criteria. This skill should be used when the user asks to 'convert prd to ridl', 'create ridl.md', 'make ridl iterations from prd', 'ridl md', 'break prd into iterations', 'convert prd to iteration definitions', 'break prd into stories', or 'convert prd to user stories'. Reads a comprehensive PRD and distills it into small, agent-sized iteration definitions."
user-invocable: true
---

# RIDL PRD Converter (Markdown)

Convert a comprehensive PRD (generated by `/ridl-skills:prd`) into `ridl.md` — a PRD with small, agent-sized iteration definitions, each encompassing a user story and verifiable acceptance criteria, suitable for the RIDL autonomous loop.

---

## The Job

1. Read the source PRD from `ridl/prd.md` (or a path specified by the user)
2. Analyze the PRD and break requirements into agent-sized iteration definitions
3. Generate a draft `ridl.md` with iteration definitions (each containing a user story and acceptance criteria)
4. **Per-iteration-definition review:** Present each iteration definition to the user and ask if they want to adjust, add, or remove criteria before finalizing
5. Incorporate feedback and save to `ridl/ridl.md`

If no `ridl/prd.md` is found, prompt the user to either provide a path or run `/ridl-skills:prd` first to generate one.

**Important:** Do NOT start implementing. Just create the ridl.md.

---

## Versioning

**Skill file versioning:** This skill uses semantic versioning (`major.minor.patch`) in the frontmatter `version` field. When Claude helps an author write or update this skill file, the version **must** be bumped before saving:

- **Patch** (e.g., 1.0.1 → 1.0.2): Small changes — typo fixes, wording tweaks, minor clarifications
- **Minor** (e.g., 1.0.2 → 1.1.0): Larger changes — adding/removing a section, changing the workflow, updating templates
- **Major** (e.g., 1.1.0 → 2.0.0): Very large changes in scope or features — fundamental restructuring, new capabilities, breaking changes to the output format

Always update the `version` field in the YAML frontmatter at the top of this file.

**Output versioning:** The generated `ridl.md` **must** inherit the version from the source `prd.md`. Read the `**Version:**` field from the PRD header block and carry it into the ridl.md header. This keeps the pipeline artifacts in sync — `ridl.md` always tracks the PRD version it was generated from.

**Local modification suffix:** If `ridl.md` is modified via this skill (e.g., adjusting iteration definitions, tweaking criteria) but the source `prd.md` was **not** regenerated, append a semver pre-release suffix: `-ridlmd.N`, where N increments with each local edit. For example:

- First local edit: `1.0.0-ridlmd.1`
- Second local edit: `1.0.0-ridlmd.2`
- Source PRD regenerated: version resets to the new PRD version (e.g., `1.1.0`) with no suffix

---

## Step 1: Read and Analyze the Source PRD

Read the comprehensive PRD and identify:

- **Feature areas** from the functional requirements sections
- **Requirement priorities** (P0, P1, P2) to determine iteration definition ordering
- **Dependencies** between features (schema before backend before UI)
- **UI elements** that will need browser verification
- **Technical architecture** details that inform implementation order
- **Release milestones** from the PRD milestone/release schedule (Section 9)
- **Universal context** — non-functional requirements (NF), developer experience (DX), and other cross-cutting concerns that apply across all iteration definitions rather than mapping to individual ones

---

## Step 2: Break Requirements into Iteration Definitions

Convert each feature area's requirements into one or more iteration definitions. Each iteration definition must be **completable in one agent iteration** (one context window).

An **iteration definition** consists of:
- **User story:** A description of the feature or change (e.g., "As a [user], I want [feature] so that [benefit]")
- **PRD references:** A bulleted list of the PRD requirement codes (e.g., TE-1, DI-3, NF-6) this iteration definition implements, each with the requirement's title or summary for readability and traceability back to the source PRD
- **Acceptance criteria:** A checklist of verifiable conditions that must be true when the iteration is complete

### Identifying Universal Context vs. Iteration Definitions

PRD sections like Non-Functional Requirements (NF), Developer Experience (DX), and Technical Architecture contain a mix of cross-cutting constraints and concrete implementable features. Evaluate each item individually:

**Universal context** — cross-cutting constraints that apply to all iteration definitions:
- Performance targets (e.g., "app launch < 1 second")
- Privacy/security constraints (e.g., "no data transmitted over the network")
- Code style rules (e.g., "SwiftLint passes with zero warnings")
- Logging conventions (e.g., "use structured key-value format with os.Logger")
- Architectural patterns (e.g., "Views/, ViewModels/, Models/, Services/ file organization")

**Iteration definitions** — concrete, implementable features that happen to live in NF/DX sections:
- "Settings includes a Debug Mode toggle that enables a debug info pane" → this is a buildable UI feature, make it an iteration definition
- "Error dialogs include a 'Copy error details' button" → this is a buildable UI feature, make it an iteration definition
- "App window state is restored on relaunch" → this is a discrete implementable behavior, make it an iteration definition

**Rule of thumb:** If an item requires building something specific (a UI element, a new behavior, a concrete feature), it is an iteration definition. If it is a standard or constraint that agents should adhere to while building other things, it is universal context.

Extract universal context into a **Universal Context** section in the output. Every agent implementing an iteration definition must adhere to this context. Incorporate relevant universal context into individual acceptance criteria where appropriate (e.g., "SwiftLint passes with zero warnings" on every iteration definition if the PRD requires it).

### Iteration Definition Sizing Rules

**Right-sized:**
- Add a database column and migration
- Add a UI component to an existing page
- Update a server action with new logic
- Add a filter dropdown to a list

**Too big (split these):**
- "Build the entire dashboard" — Split into: schema, queries, UI components, filters
- "Add authentication" — Split into: schema, middleware, login UI, session handling

**Rule of thumb:** If the change cannot be described in 2-3 sentences, it is too big.

### Ordering: Dependencies First

Iteration definitions must be ordered so earlier ones never depend on later ones:

1. Schema/database changes (migrations)
2. Server actions / backend logic
3. UI components that use the backend
4. Dashboard/summary views that aggregate data

### Milestone Assignment

If the source PRD defines release milestones, assign each iteration definition to a milestone:

1. Map each iteration definition to the feature area it implements
2. Assign it to the **earliest milestone** whose scope covers that feature
3. Use the milestone IDs from the PRD (MS-1, MS-2, etc.)
4. Every iteration definition must belong to exactly one milestone
5. Milestone ordering must be consistent with dependency ordering — an iteration definition in MS-2 must not be a dependency of one in MS-1

If the source PRD does not define milestones, omit the Milestones section from the output.

### Acceptance Criteria Rules

Each criterion must be verifiable — something an agent can CHECK, not something vague.

**Good:** "Add `status` column to tasks table with default 'pending'"
**Bad:** "Works correctly"

**Always include:** "Typecheck passes" on every iteration definition.
**For UI iteration definitions also include:** "Verify in browser using dev-browser skill"

---

## Step 3: Generate ridl.md

### Output Structure

```markdown
# PRD: [Feature Name]

**Version:** [inherited from source prd.md]
**Generated by:** ridl-skills:ridlmd v[skill version from frontmatter]

## Introduction

[Brief description from source PRD overview]

## Goals

[Bullet list from source PRD goals or derived from requirements]

## Universal Context

Cross-cutting requirements that apply to ALL iteration definitions. Every agent must adhere to these constraints regardless of which iteration definition it is implementing.

### Non-Functional Requirements
- [NF requirements from source PRD: performance targets, privacy, compatibility, etc.]

### Developer Experience
- [DX requirements from source PRD: error handling conventions, logging, code organization, linting, etc.]

### Technical Architecture
- [Key dependencies, shared patterns, component structure from source PRD]

## Iteration Definitions

### ID-001: [Title]
**User Story:** As a [user], I want [feature] so that [benefit].

**PRD References:**
- TE-1: User can create a new Mustache template in a multi-line text editor
- TE-2: Editor provides syntax highlighting for Mustache variable tags

**Acceptance Criteria:**
- [ ] Specific verifiable criterion
- [ ] Another criterion
- [ ] Typecheck passes

### ID-002: [Title]
**User Story:** As a [user], I want [feature] so that [benefit].

**PRD References:**
- DI-1: Data view displays a spreadsheet-style grid with variable name column headers
- DI-2: Each row represents one complete set of variable values
- DI-4: Columns are auto-generated from detected template variables

**Acceptance Criteria:**
- [ ] ...

## Milestones

### MS-1: v0.1 — [Theme]
- ID-001: [Title]
- ID-002: [Title]

### MS-2: v0.2 — [Theme]
- ID-003: [Title]

## Functional Requirements

- FR-1: [Requirement from source PRD]
- FR-2: [Requirement from source PRD]

## Non-Goals (Out of Scope)

[From source PRD or derived]

## Success Metrics

[From source PRD]
```

---

## Step 4: Per-Iteration-Definition Review

After generating the draft, present each iteration definition to the user for review. For each one:

1. Show the title, user story, and acceptance criteria
2. Ask the user:
   - Are these acceptance criteria correct and complete?
   - Should any criteria be added, removed, or modified?
   - Is this the right size (completable in one agent iteration)?
3. Incorporate feedback before moving to the next iteration definition

### Format the review like this:

```
### ID-001: [Title]
**User Story:** As a [user], I want [feature] so that [benefit].

**PRD References:**
- XX-1: Summary of referenced requirement
- XX-2: Summary of another referenced requirement

**Acceptance Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2
- [ ] Typecheck passes

Anything to add, change, or remove for this iteration definition?
(Reply "ok" to approve as-is and move to the next one)
```

Skip this step only if the user explicitly says to generate without review.

---

## Writing for Autonomous Agents

The ridl.md reader is an AI agent. Therefore:

- Be explicit and unambiguous
- Avoid jargon or explain it
- Provide enough detail to understand purpose and core logic
- Number requirements for easy reference
- Use concrete examples where helpful
- Each iteration definition must stand alone — an agent with no memory of prior iteration definitions must be able to implement it (universal context is always available)

---

## Output

- **Format:** Markdown (`.md`)
- **Location:** `ridl/`
- **Filename:** `ridl.md`

---

## Pipeline Context

This skill is step 2 in the RIDL pipeline. All files live in the `ridl/` directory:

```
/ridl-skills:prd      →  ridl/prd.md      (comprehensive PRD)
/ridl-skills:ridlmd   →  ridl/ridl.md     (agent-sized iteration definitions)  ← you are here
/ridl-skills:ridljson  →  ridl/ridl.json   (JSON for autonomous loop)
```

---

## Checklist

Before saving ridl.md:

- [ ] Source PRD was read and analyzed
- [ ] Non-functional, DX, and cross-cutting requirements extracted into Universal Context
- [ ] Functional requirements broken into agent-sized iteration definitions
- [ ] Iteration definitions ordered by dependency (schema → backend → UI)
- [ ] Every iteration definition has "Typecheck passes" as criterion
- [ ] UI iteration definitions have "Verify in browser using dev-browser skill" as criterion
- [ ] Acceptance criteria are verifiable (not vague)
- [ ] No iteration definition depends on a later one
- [ ] Every iteration definition is assigned to a milestone (if PRD defines milestones)
- [ ] Milestones section is present and lists all iteration definitions (if PRD defines milestones)
- [ ] Milestone ordering is consistent with dependency ordering
- [ ] Per-iteration-definition review completed with user
- [ ] Saved to `ridl/ridl.md`
