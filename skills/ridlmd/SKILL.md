---
name: ridlmd
version: 1.0.2
description: "Convert a comprehensive PRD into an agent-sized ridl.md with user stories and acceptance criteria for the RIDL autonomous agent loop. This skill should be used when the user asks to 'convert prd to ridl', 'create ridl.md', 'make ridl stories from prd', 'ridl md', 'break prd into stories', or 'convert prd to user stories'. Reads a comprehensive PRD and distills it into small, agent-sized user stories."
user-invocable: true
---

# RIDL PRD Converter (Markdown)

Convert a comprehensive PRD (generated by `/ridl-skills:prd`) into `ridl.md` — a PRD with small, agent-sized user stories and verifiable acceptance criteria suitable for the RIDL autonomous loop.

---

## The Job

1. Read the source PRD from `ridl/prd.md` (or a path specified by the user)
2. Analyze the functional requirements and break them into agent-sized user stories
3. Generate a draft `ridl.md` with user stories and acceptance criteria
4. **Per-story acceptance criteria review:** Present each user story to the user and ask if they want to adjust, add, or remove criteria before finalizing
5. Incorporate feedback and save to `ridl/ridl.md`

If no `ridl/prd.md` is found, prompt the user to either provide a path or run `/ridl-skills:prd` first to generate one.

**Important:** Do NOT start implementing. Just create the ridl.md.

---

## Versioning

**Skill file versioning:** This skill uses semantic versioning (`major.minor.patch`) in the frontmatter `version` field. When Claude helps an author write or update this skill file, the version **must** be bumped before saving:

- **Patch** (e.g., 1.0.1 → 1.0.2): Small changes — typo fixes, wording tweaks, minor clarifications
- **Minor** (e.g., 1.0.2 → 1.1.0): Larger changes — adding/removing a section, changing the workflow, updating templates
- **Major** (e.g., 1.1.0 → 2.0.0): Very large changes in scope or features — fundamental restructuring, new capabilities, breaking changes to the output format

Always update the `version` field in the YAML frontmatter at the top of this file.

**Output versioning:** The generated `ridl.md` **must** inherit the version from the source `prd.md`. Read the `**Version:**` field from the PRD header block and carry it into the ridl.md header. This keeps the pipeline artifacts in sync — `ridl.md` always tracks the PRD version it was generated from.

**Local modification suffix:** If `ridl.md` is modified via this skill (e.g., adjusting stories, tweaking criteria) but the source `prd.md` was **not** regenerated, append a semver pre-release suffix: `-ridlmd.N`, where N increments with each local edit. For example:

- First local edit: `1.0.0-ridlmd.1`
- Second local edit: `1.0.0-ridlmd.2`
- Source PRD regenerated: version resets to the new PRD version (e.g., `1.1.0`) with no suffix

---

## Step 1: Read and Analyze the Source PRD

Read the comprehensive PRD and identify:

- **Feature areas** from the functional requirements sections
- **Requirement priorities** (P0, P1, P2) to determine story ordering
- **Dependencies** between features (schema before backend before UI)
- **UI elements** that will need browser verification
- **Technical architecture** details that inform implementation order

---

## Step 2: Break Requirements into User Stories

Convert each feature area's requirements into one or more user stories. Each story must be **completable in one agent iteration** (one context window).

### Story Sizing Rules

**Right-sized stories:**
- Add a database column and migration
- Add a UI component to an existing page
- Update a server action with new logic
- Add a filter dropdown to a list

**Too big (split these):**
- "Build the entire dashboard" — Split into: schema, queries, UI components, filters
- "Add authentication" — Split into: schema, middleware, login UI, session handling

**Rule of thumb:** If the change cannot be described in 2-3 sentences, it is too big.

### Story Ordering: Dependencies First

Stories must be ordered so earlier stories never depend on later ones:

1. Schema/database changes (migrations)
2. Server actions / backend logic
3. UI components that use the backend
4. Dashboard/summary views that aggregate data

### Acceptance Criteria Rules

Each criterion must be verifiable — something an agent can CHECK, not something vague.

**Good:** "Add `status` column to tasks table with default 'pending'"
**Bad:** "Works correctly"

**Always include:** "Typecheck passes" on every story.
**For UI stories also include:** "Verify in browser using dev-browser skill"

---

## Step 3: Generate ridl.md

### Output Structure

```markdown
# PRD: [Feature Name]

**Version:** [inherited from source prd.md]

## Introduction

[Brief description from source PRD overview]

## Goals

[Bullet list from source PRD goals or derived from requirements]

## User Stories

### US-001: [Title]
**Description:** As a [user], I want [feature] so that [benefit].

**Acceptance Criteria:**
- [ ] Specific verifiable criterion
- [ ] Another criterion
- [ ] Typecheck passes

### US-002: [Title]
...

## Functional Requirements

- FR-1: [Requirement from source PRD]
- FR-2: [Requirement from source PRD]

## Non-Goals (Out of Scope)

[From source PRD or derived]

## Technical Considerations

[Key constraints, dependencies, integration points from source PRD]

## Success Metrics

[From source PRD]
```

---

## Step 4: Per-Story Acceptance Criteria Review

After generating the draft, present each user story to the user for review. For each story:

1. Show the story title, description, and acceptance criteria
2. Ask the user:
   - Are these acceptance criteria correct and complete?
   - Should any criteria be added, removed, or modified?
   - Is the story the right size (completable in one agent iteration)?
3. Incorporate feedback before moving to the next story

### Format the review like this:

```
### US-001: [Story Title]
**Description:** As a [user], I want [feature] so that [benefit].

**Acceptance Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2
- [ ] Typecheck passes

Anything to add, change, or remove for this story?
(Reply "ok" to approve as-is and move to the next story)
```

Skip this step only if the user explicitly says to generate without review.

---

## Writing for Autonomous Agents

The ridl.md reader is an AI agent. Therefore:

- Be explicit and unambiguous
- Avoid jargon or explain it
- Provide enough detail to understand purpose and core logic
- Number requirements for easy reference
- Use concrete examples where helpful
- Each story must stand alone — an agent with no memory of prior stories must be able to implement it

---

## Output

- **Format:** Markdown (`.md`)
- **Location:** `ridl/`
- **Filename:** `ridl.md`

---

## Pipeline Context

This skill is step 2 in the RIDL pipeline. All files live in the `ridl/` directory:

```
/ridl-skills:prd      →  ridl/prd.md      (comprehensive PRD)
/ridl-skills:ridlmd   →  ridl/ridl.md     (agent-sized user stories)  ← you are here
/ridl-skills:ridljson  →  ridl/ridl.json   (JSON for autonomous loop)
```

---

## Checklist

Before saving ridl.md:

- [ ] Source PRD was read and analyzed
- [ ] Requirements broken into agent-sized user stories
- [ ] Stories ordered by dependency (schema → backend → UI)
- [ ] Every story has "Typecheck passes" as criterion
- [ ] UI stories have "Verify in browser using dev-browser skill" as criterion
- [ ] Acceptance criteria are verifiable (not vague)
- [ ] No story depends on a later story
- [ ] Per-story acceptance criteria reviewed with user
- [ ] Saved to `ridl/ridl.md`
